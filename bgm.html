<!-- 
 
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BGM</title>
</head>
<body>
  -->

  

  <!-- 
 
  <audio id="bgm" preload="auto" loop>
    <source src="assets/audio/bgm.mp3" type="audio/mpeg">
  </audio>
   -->


  <!doctype html>
  <html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BGM</title>
  </head>
  <body>
    <audio id="bgm" preload="auto" loop>
      <source src="/assets/audio/bgm.mp3" type="audio/mpeg">
    </audio>
  
    <script>
      const audio = document.getElementById('bgm');
  
      async function play() { await audio.play(); }
      function pause() { audio.pause(); }
  
      window.addEventListener('message', async (e) => {
        const msg = e.data;
        if (!msg || typeof msg !== 'object') return;
  
        if (msg.type === 'BGM_TOGGLE') {
          try { audio.paused ? await play() : pause(); } catch {}
        }
        if (msg.type === 'BGM_PLAY') {
          try { await play(); } catch {}
        }
        if (msg.type === 'BGM_PAUSE') pause();
  
        if (msg.type === 'BGM_STATUS') {
          e.source?.postMessage({
            type: 'BGM_STATUS_REPLY',
            playing: !audio.paused
          }, '*');
        }
      });
    </script>
  </body>
  </html>